(this.webpackJsonpcertify=this.webpackJsonpcertify||[]).push([[0],{116:function(e,t){},118:function(e,t){},119:function(e,t){},175:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"createTextItem",(function(){return C})),n.d(a,"editCanvas",(function(){return E})),n.d(a,"setActiveItem",(function(){return S})),n.d(a,"setStageRef",(function(){return k})),n.d(a,"editWholeCanvas",(function(){return T})),n.d(a,"setUserTemplates",(function(){return D})),n.d(a,"setUserTemplatesLoading",(function(){return I})),n.d(a,"setCurrentTemplate",(function(){return N})),n.d(a,"addFont",(function(){return _})),n.d(a,"setFonts",(function(){return B})),n.d(a,"createImageItem",(function(){return F}));var c=n(8),i=n.n(c),r=n(99),o=n.n(r),s=n(12),l=(n(50),n(42)),d=Object(c.createContext)({}),u=function(e){return{id:f(),isConstant:!1,type:"text",name:"text",value:"Example text field",color:"#fff",x:10,y:10,attr:{fontSize:75}}},j=function(){return{isConstant:!1,id:f(),type:"image",name:"image",src:"default",x:10,y:10,height:100,width:100,scale:1,draggable:!0}},f=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,a=0;a<12;a++)e+=t.charAt(Math.floor(Math.random()*n));return e},b="CREATE_ITEM",p="EDIT_CANVAS",m="SET_ACTIVE_ITEM",h="SET_STAGE_REF",g="EDIT_WHOLE_CANVAS",O="SET_CURRENT_TEMPLATE",x="SET_USER_TEMPLATES",v="SET_FONTS",y="ADD_FONT",w=n(22),C=function(e){return{type:b,payload:u()}},E=function(e){return{type:p,payload:e,info:"description"}},S=function(e){return{type:m,payload:e,info:"description"}},k=function(e){return{type:h,payload:e,info:"description"}},T=function(e){return{type:g,payload:e,info:"description"}},D=function(e){return{type:x,payload:e,info:"description"}},I=function(e){return{type:"SET_USER_TEMPLATES_LOADING",payload:e,info:"description"}},N=function(e){return{type:O,payload:e,info:"description"}},_=function(e){return{type:y,payload:e,info:"description"}},B=function(e){return{type:v,payload:e,info:"description"}},F=function(e){return{type:b,payload:e}},R="SIGN_IN",A="SIGN_OUT",L=function(e){return{type:R,payload:e}},z=function(e){return{type:"SET_LOADING_STATE",payload:e}},W=n(6);var H=function(){var e=Object(l.b)(),t=Object(c.useContext)(d),n=t.store,a=t.dispatch;return console.log(n.user.uid),Object(W.jsx)("div",{style:{width:"100%",height:"80%",display:"flex"},children:Object(W.jsx)("div",{style:{margin:"0 auto",marginTop:70,verticalAlign:"center",border:"1px solid #BED7E1",borderRadius:10,width:300,height:100,display:"flex"},children:n.user.isSignedIn?Object(W.jsxs)("div",{style:{margin:"auto",display:"flex",flexDirection:"column"},children:[Object(W.jsxs)("span",{style:{fontFamily:"monospace",fontSize:18},children:["Hello ",n.user.displayName]}),Object(W.jsx)("div",{onClick:function(){Object(l.e)(e).then((function(){a({type:A}),alert("Signed Out")})).catch((function(e){alert("Signout failed")}))},style:{border:"2px solid #BED7E1",backgroundColor:"#BED7E1",borderRadius:5,height:30,display:"flex",width:80,cursor:"pointer",margin:"auto",marginTop:15},children:Object(W.jsx)("div",{style:{margin:"auto",fontWeight:"bold",fontFamily:"monospace",color:"white",fontSize:14},children:"Sign Out"})})]}):Object(W.jsxs)("div",{style:{margin:"auto",display:"flex",flexDirection:"column"},children:[Object(W.jsx)("span",{style:{fontFamily:"monospace",fontSize:18},children:"Sign in to continue"}),Object(W.jsx)("div",{onClick:function(){console.log("Auth");var t=new l.a;Object(l.d)(e,t).then((function(e){l.a.credentialFromResult(e).accessToken;var t=e.user;a(L(t)),console.log(t)})).catch((function(e){e.code,e.message,e.email,l.a.credentialFromError(e)}))},style:{border:"1px solid #BED7E1",backgroundColor:"#BED7E1",borderRadius:5,height:30,display:"flex",width:80,cursor:"pointer",margin:"auto",marginTop:15},children:Object(W.jsx)("div",{style:{margin:"auto",fontWeight:"bold",fontFamily:"monospace",color:"white",fontSize:14},children:"SignIn"})})]})})})},M=n(0),P=n.n(M),U=n(3),V=n(14),q=n(18),G=(n(79),function(){var e=Object(U.a)(P.a.mark((function e(t){var n,a,c,i,r,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,a=t.name,c=t.description,i={name:a,description:c,uid:n,createdAt:(new Date).getTime(),exportCertificatesAs:"png",canvas:{ratio:{x:1,y:1},baseImageHeight:"default",baseImageWidth:"default",items:[Object(V.a)(Object(V.a)({},j()),{},{draggable:!1,type:"base-image",name:"Base template image",alt:"Example image",storageRef:"default_template_images/base.png"}),{type:"text",value:"Example text field",x:25,y:25,fill:"#fff",attr:{fontSize:200,fontFamily:"Poppins"},isConstant:!1}]}},r=Object(q.g)(),e.next=5,Object(q.a)(Object(q.b)(r,"templates"),i);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Y=function(){var e=Object(U.a)(P.a.mark((function e(t){var n,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(q.g)(),e.next=3,Object(q.f)(Object(q.b)(n,"templates"),Object(q.j)("uid","==",t));case 3:return a=e.sent,console.log(a),c=[],a.forEach((function(e){if(console.log(e.data().uid,"     ",t),e.data().uid===t){var n={id:e.id,data:e.data()};c.push(n)}})),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(U.a)(P.a.mark((function e(t,n){var a,c,i,r,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t,n),a=Object(q.g)(),c=Object(q.d)(a,"templates",t),e.next=5,Object(q.e)(c);case 5:return i=e.sent,n.map((function(e){"image"!==e.type&&"base-image"!==e.type||"default"!==e.src&&(e.src="image"),"text"===e.type&&(e.attr.fontSize=parseInt(e.attr.fontSize)||25)})),console.log(i.data()),r=Object(V.a)(Object(V.a)({},i.data()),{},{canvas:Object(V.a)(Object(V.a)({},i.data().canvas),{},{items:n})}),e.next=11,Object(q.h)(Object(q.d)(a,"templates",t.toString()),r);case 11:return o=e.sent,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(U.a)(P.a.mark((function e(t,n){var a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(w.b)(),c=Object(w.c)(a,n),e.next=4,Object(w.d)(c,t);case 4:return i=e.sent,console.log("Uploaded"),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(U.a)(P.a.mark((function e(t){var n,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(w.b)(),a=Object(w.c)(n,t),e.next=4,Object(w.a)(a);case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(U.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(q.c)(Object(q.d)(Object(q.g)(),"templates",t));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(U.a)(P.a.mark((function e(){var t;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)(Object(w.c)(Object(w.b)(),"default_template_images/image.jpg"));case 2:return t=e.sent,e.abrupt("return",new Promise((function(e,n){var a=new window.Image;a.crossOrigin="anonymous",a.src=t,a.height=a.height,a.width=a.width,a.onload=function(){var t={isConstant:!1,id:j().id,name:"new image",type:"image",src:a,draggable:!0,x:100,y:100,width:a.width,height:a.height,storageRef:"default_template_images/image.jpg"};e(t)}})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(U.a)(P.a.mark((function e(t){var n,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(q.g)(),e.next=3,Object(q.f)(Object(q.b)(n,"certificates"),Object(q.j)("uid","==",t));case 3:return a=e.sent,c=[],a.forEach((function(e){if(e.data().uid===t){var n={id:e.id,data:e.data()};c.push(n)}})),console.log(c),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ee=function(){var e=Object(U.a)(P.a.mark((function e(t){var n,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(q.g)(),e.next=3,Object(q.f)(Object(q.b)(n,"certificates"),Object(q.j)("receieverEmail","==",t));case 3:return a=e.sent,c=[],a.forEach((function(e){if(e.data().receiverEmail===t){var n={id:e.id,data:e.data()};c.push(n)}})),console.log(c),e.abrupt("return",c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(U.a)(P.a.mark((function e(t,n){var a,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(q.g)(),e.next=3,Object(q.d)(a,"certificates",t);case 3:return c=e.sent,e.next=6,Object(q.i)(c,{isShareable:n});case 6:return i=e.sent,console.log(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ne=function(){var e=Object(U.a)(P.a.mark((function e(t,n,a){var c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(q.g)(),e.next=3,Object(q.a)(Object(q.b)(c,"changes_requested"),{certificate_id:t,issuer_uid:n,new_name:a.name,new_email:a.email,waiting_for_approval:!0});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ae=function(){var e=Object(U.a)(P.a.mark((function e(t){var n,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(q.g)(),e.next=3,Object(q.f)(Object(q.b)(n,"changes_requested"),Object(q.j)("issuer_uid","==",t));case 3:return a=e.sent,c=[],a.forEach((function(e){!0===e.data().waiting_for_approval&&c.push({id:e.id,data:e.data()})})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(U.a)(P.a.mark((function e(t){var n,a,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(q.g)(),e.next=3,Object(q.f)(Object(q.b)(n,"certificates"),Object(q.j)("id","==",t));case 3:return a=e.sent,c=[],a.forEach((function(e){if(e.id===t){var n={id:e.id,data:e.data()};c.push(n)}})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(U.a)(P.a.mark((function e(t,n,a){var c,i,r,o,s,l=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=l.length>3&&void 0!==l[3]?l[3]:{},i=Object(q.g)(),e.next=4,Object(q.d)(i,"changes_requested",n);case 4:if(r=e.sent,o=Object(q.i)(r,{waiting_for_approval:!1,is_approved:a}),!a){e.next=11;break}return e.next=9,Object(q.d)(i,"certificates",t);case 9:s=e.sent,Object(q.i)(s,{receiverName:c.newName,receiverEmail:c.newEmail});case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),re=n(17),oe=n(41),se=function(e){var t=e.shapeProps,n=e.isSelected,a=e.onClick,c=e.onChange,r=e.item,o=i.a.useRef(),s=i.a.useRef();return i.a.useEffect((function(){n&&(s.current.nodes([o.current]),s.current.getLayer().batchDraw())}),[n]),Object(W.jsxs)(i.a.Fragment,{children:[Object(W.jsx)(oe.b,Object(V.a)(Object(V.a)({image:r.src,onClick:a,onTap:a,ref:o},t),{},{draggable:!0,onDragEnd:function(e){c(Object(V.a)(Object(V.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=o.current,a=n.scaleX(),i=n.scaleY();n.scaleX(1),n.scaleY(1),c(Object(V.a)(Object(V.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*a),height:Math.max(n.height()*i)}))}}),r.id),n&&Object(W.jsx)(oe.g,{ref:s,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})};var le=function(){var e=Object(c.useContext)(d),t=e.store,n=e.dispatch,i=Object(c.useRef)(null),r=Object(c.useRef)(null),o=t.templates.currentTemplate.canvas.items,s=t.templates.currentTemplate.canvas.activeItem,l=o.find((function(e){return"base-image"===e.type}))["original-width"],u=o.find((function(e){return"base-image"===e.type}))["original-height"],j=l/u,f=function(e,t){var c=Object(re.a)(o),i=e.target._lastPos.x,r=e.target._lastPos.y;i=e.target.x(),r=e.target.y(),c.map((function(e){return e.id===t&&(e.x=i,e.y=r),e})),n(a.editCanvas(o))},b=function(e){n(a.setActiveItem({id:"none"})),n(a.setActiveItem(e)),console.log(o)};return Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"cemter",alignItems:"center",padding:"3px"},children:[Object(W.jsx)("button",{onClick:function(){if(i){var e=i.current.toDataURL({pixelRatio:1}),t=document.createElement("a");t.download="ex.png",t.href=e,document.body.appendChild(t),t.click(),document.body.removeChild(t),t=null}else alert("Please create a stageRef first")},children:"Download"}),Object(W.jsx)("div",{style:{border:"4px solid red"},children:Object(W.jsx)(oe.e,{ref:i,width:.8*window.innerHeight*j,height:.8*window.innerHeight,scaleX:.8*window.innerHeight*j/l,scaleY:.8*window.innerHeight/u,children:Object(W.jsx)(oe.c,{children:o.map((function(e,t){switch(e.type){case"base-image":return Object(W.jsx)(oe.b,{image:e.src,onClick:function(){return b(e)},x:0,y:0,width:l,height:u,src:e.src},t);case"image":return Object(W.jsx)(se,{x:e.x,y:e.y,src:e.src,item:e,image:e.src,shapeProps:e,draggable:!0,isSelected:e.id===s.id,onClick:function(){return b(e)},onChange:function(e){var c=o;c[t]=Object(V.a)(Object(V.a)(Object(V.a)({},c[t]),e),{},{width:e.width,height:e.height}),n(a.editCanvas(c)),console.log(c[t])},onDragEnd:function(t){return f(t,e.id)},onDragMove:function(e){e.target.y(Math.max(e.target.y(),0)),e.target.x(Math.max(e.target.x(),0))}},t);case"text":return Object(W.jsxs)(oe.a,{x:e.x,y:e.y,draggable:!0,onDragEnd:function(t){return f(t,e.id)},onDragMove:function(e){e.target.y(Math.max(e.target.y(),0)),e.target.x(Math.max(e.target.x(),0))},onClick:function(){return b(e)},ref:r,children:[Object(W.jsx)(oe.f,Object(V.a)(Object(V.a)({fill:e.color||e.fill,text:e.value},e.attr),{},{textDecoration:e.id===s.id?"underline":""})),e.id===s.id?Object(W.jsx)(oe.d,{}):null]},t);default:return null}}))})})})]})},de=(n(176),n(181)),ue=n(108),je=n(182),fe=n(183),be="card",pe={border:"1px solid gray",padding:"0.5rem 1rem",marginBottom:".5rem",backgroundColor:"white",cursor:"pointer",fontWeight:"bold"},me=function(e){var t=e.id,n=e.index,i=e.moveCard,r=e.item,o=Object(c.useContext)(d),l=o.store,u=o.dispatch,j=Object(c.useRef)(null),f=Object(je.a)({accept:be,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(j.current){var c=e.index,r=n;if(c!==r){var o=null===(a=j.current)||void 0===a?void 0:a.getBoundingClientRect(),s=(o.bottom-o.top)/2,l=t.getClientOffset().y-o.top;c<r&&l<s||c>r&&l>s||(i(c,r),e.index=r)}}}}),b=Object(s.a)(f,2),p=b[0].handlerId,m=b[1],h=Object(fe.a)({type:be,item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),g=Object(s.a)(h,2),O=g[0].isDragging,x=g[1],v=O?0:1;return x(m(j)),Object(W.jsx)("div",{ref:j,style:Object(V.a)(Object(V.a)({},pe),{},{opacity:v,border:"2px solid ".concat(l.templates.currentTemplate.canvas.activeItem.id===r.id?"#e95":"grey")}),"data-handler-id":p,onClick:function(){return function(e){u(a.setActiveItem(e))}(r)},children:r.value||r.name})},he=n(103),ge=n.n(he),Oe={width:"80%",margin:"3px",display:"flex",flexDirection:"column-reverse"},xe=function(){var e=Object(c.useContext)(d),t=e.store,n=e.dispatch,i=Object(c.useCallback)((function(e,c){var i=t.templates.currentTemplate.canvas.items[e];n(a.editCanvas(ge()(t.templates.currentTemplate.canvas.items,{$splice:[[e,1],[c,0,i]]}))),console.log("DRAG INDEX",t.templates.currentTemplate.canvas.items[e])}),[t.templates.currentTemplate.canvas.items]);return Object(W.jsx)(W.Fragment,{children:Object(W.jsx)("div",{style:Oe,children:t.templates.currentTemplate.canvas.items.map((function(e,t){return function(e,t){return Object(W.jsx)(me,{index:t,id:e.id,item:e,text:e.name,moveCard:i},t)}(e,t)}))})})},ve=n(60),ye=n.n(ve),we=function(){var e=Object(U.a)(P.a.mark((function e(t){var n,a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(n="https://www.googleapis.com/webfonts/v1/webfonts?key=AIzaSyBaX8tNR8l6g596VD30jXrb8sqcIay1OQg","&sort=").concat(t),e.next=4,ye.a.get(n);case 4:return a=e.sent,e.abrupt("return",a.data.items);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Ce=function(){var e=Object(c.useContext)(d),t=e.store,n=e.dispatch,i=Object(c.useState)(),r=Object(s.a)(i,2),o=r[0],l=r[1],u=Object(c.useState)(),j=Object(s.a)(u,2),f=j[0],b=j[1],p=Object(c.useState)(25),m=Object(s.a)(p,2),h=m[0],g=m[1],O=t.templates.currentTemplate.canvas.items,x=t.templates.currentTemplate.canvas.activeItem,v=function(){var e=Object(U.a)(P.a.mark((function e(c){var i,r,o,s,d,u,j;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new window.Image).src=c,r=i.width,o=window.innerHeight/4,s=r/o,i.width=o,i.height=i.height/s,d=Ee(),u="".concat(t.user.uid,"/").concat(t.templates.currentTemplate.id,"/").concat(d,"_").concat(f.name),console.log(u),e.next=12,J(f,u);case 12:j=(j=Object(re.a)(O)).map((function(e){return e.id===x.id&&(e.height=i.height,e.width=i.width,e.src=i,e.storageRef=u),e})),n(a.editCanvas(j)),l(null),b(null);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(U.a)(P.a.mark((function e(c){var i,r,o,s;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=new window.Image).src=c,r=Ee(),o="".concat(t.user.uid,"/").concat(t.templates.currentTemplate.id,"/").concat(f.name,"_").concat(r,".jpg"),e.next=6,J(f,o);case 6:s=(s=Object(re.a)(O)).map((function(e){return e.id===x.id&&(e.height=i.height,e.width=i.width,e.src=i,e.storageRef=o),e})),n(a.editCanvas(s)),l(null),b(null);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(U.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z().then((function(e){n(a.createImageItem(e))}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e,t){switch(t){case"val":var c=O;c.map((function(t){return t.id===x.id&&(t.value=e.target.value,t.name=e.target.value),null})),n(a.editCanvas(c));break;case"img":var i=O;i.map((function(t){return t.id===x.id&&(t.name=e.target.value),null})),n(a.editCanvas(i));break;case"check":var r=O;r.map((function(t){return t.id===x.id&&(t.isConstant=e.target.checked),null})),n(a.editCanvas(r))}},E=function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){l(t.result)},b(e)},S=function(){var e=Object(re.a)(O).filter((function(e){return e.id!==x.id}));n(a.editCanvas(e)),n(a.setActiveItem({id:"none"}))};return Object(W.jsxs)("div",{onKeyDown:function(e){"Delete"==e.key&&S()},style:{margin:"8px"},children:[Object(W.jsx)("h3",{children:"Canvas"}),Object(W.jsx)(de.a,{backend:ue.a,children:Object(W.jsx)(xe,{})}),Object(W.jsx)("hr",{}),Object(W.jsx)("div",{children:"Add Item "}),Object(W.jsx)("div",{style:{marginTop:"5px"},children:Object(W.jsx)("button",{onClick:function(){n(a.createTextItem("text"))},children:"Add text"})}),Object(W.jsx)("div",{style:{marginTop:"5px"},children:Object(W.jsx)("button",{onClick:w,children:"Add Img"})}),Object(W.jsx)("hr",{}),Object(W.jsxs)("h4",{children:["Edit Item: ",x.name]}),"base-image"!==x.type?Object(W.jsxs)("div",{children:["Is this field constant?",Object(W.jsx)("input",{type:"checkbox",defaultChecked:x.isConstant||!0,onChange:function(e){return C(e,"check")}})]}):null,"text"===x.type?Object(W.jsxs)("div",{style:{marginTop:"5px"},children:["Name of field",Object(W.jsx)("div",{children:Object(W.jsx)("input",{style:{padding:"5px"},defaultValue:x.name,onChange:function(e){return C(e,"val")}})}),Object(W.jsxs)("div",{style:{marginTop:"9px"},children:["Text Color :",Object(W.jsx)("input",{type:"color",defaultValue:x.color,onChangeCapture:function(e){var t=Object(re.a)(O);t.map((function(t){return t.id===x.id&&(t.fill=e.target.value,t.color=e.target.value),t})),n(a.editCanvas(t))}})]}),Object(W.jsxs)("div",{style:{marginTop:"5px"},children:["Font Size :",Object(W.jsx)("input",{type:"number",defaultValue:x.attr.fontSize||25,onChange:function(e){var t=Object(re.a)(O);t.map((function(t){return t.id===x.id&&(t.attr.fontSize=e.target.value),t})),n(a.editCanvas(t))}})]}),Object(W.jsxs)("div",{style:{overflow:"hidden"},children:["Font Family :",Object(W.jsx)("ul",{style:{height:"200px",overflow:"auto",paddingRight:"16px"},children:t.templates.fonts.slice(0,h).map((function(e,t){return Object(W.jsx)("li",{style:{fontFamily:e.family},onChange:function(e){},onClick:function(){var t=Object(re.a)(O);t.map((function(t){return t.id===x.id&&(t.attr=Object(V.a)(Object(V.a)({},t.attr),{},{fontFamily:e.family,fileLink:e.files.regular})),t})),n(a.editCanvas(t))},children:e.family},t)}))}),Object(W.jsx)("div",{children:Object(W.jsx)("button",{onClick:function(){return g((function(e){return e+25}))},children:"Load more fonts"})})]})]}):null,"base-image"===x.type?Object(W.jsxs)("div",{style:{border:"2px solid black",padding:"10px",marginTop:"5px",width:"90%"},children:[Object(W.jsx)("div",{children:"Change Image"}),Object(W.jsx)("input",{type:"file",onChange:function(e){return E(e.target.files[0])}}),o?Object(W.jsx)("img",{height:"80",src:o}):null,Object(W.jsx)("div",{children:o?Object(W.jsx)("button",{onClick:function(){return y(o)},children:"Set image"}):null})]}):null,"image"===x.type?Object(W.jsxs)("div",{children:[Object(W.jsxs)("div",{children:["Image name",Object(W.jsx)("input",{style:{padding:"5px"},defaultValue:x.name,onChange:function(e){return C(e,"img")}})]}),Object(W.jsxs)("div",{style:{border:"2px solid blue",padding:"5px",margin:"5px",width:"70%"},children:[Object(W.jsx)("input",{type:"file",onChange:function(e){return E(e.target.files[0])}}),o?Object(W.jsx)("img",{height:"80",src:o}):null,Object(W.jsx)("div",{children:Object(W.jsx)("button",{onClick:function(){return v(o)},children:"Set image"})})]})]}):null," ","base-image"!==x.type?Object(W.jsx)("div",{children:Object(W.jsx)("button",{onClick:S,children:"Delete"})}):null,Object(W.jsx)("div",{children:Object(W.jsx)("button",{onClick:function(){return n(a.setActiveItem({id:"none"}))},children:"Deselect"})}),Object(W.jsx)("button",{onClick:function(){X(t.templates.currentTemplate.id,t.templates.currentTemplate.canvas.items).then((function(){return window.location.reload()}))},children:"Save Template"}),Object(W.jsx)("button",{onClick:function(){Q(t.templates.currentTemplate.id).then((function(){return window.location.reload()}))},children:"Delete Template"})]})},Ee=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,a=0;a<12;a++)e+=t.charAt(Math.floor(Math.random()*n));return e};var Se=function(){return Object(W.jsx)("div",{style:{overflow:"hidden"},children:Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"},children:[Object(W.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center",width:"79%",height:"89%",margin:"10px",border:"2px solid #555"},children:Object(W.jsx)(le,{})}),Object(W.jsx)("div",{style:{paddingLeft:"5px",width:"21%",height:"89%",margin:"10px",border:"2px solid #222",overflowY:"scroll"},children:Object(W.jsx)(Ce,{width:"20%",height:"80%"})})]})})},ke=function(e){var t=new Image;t.crossOrigin="anonymous";var n=e.storageRef;return console.log(n),new Promise((function(a,c){if(n){var i=Object(w.c)(Object(w.b)(),n);K(i).then((function(n){t.src=n,t.onload=function(){e.src=t,e["original-width"]=t.width,e["original-height"]=t.height,a(e)}})).catch((function(e){c(e)}))}}))},Te=function(e){var t=[];for(var n in e){var a=e[n];"base-image"!==a.type&&"image"!==a.type||t.push(ke(a))}return Promise.all(t)};var De=function(){var e=Object(c.useContext)(d),t=e.store,n=e.dispatch,i=Object(c.useState)({fonts:!1,templates:!0,currentTemplate:!1}),r=Object(s.a)(i,2),o=r[0],l=r[1],u=t.user;Object(c.useEffect)((function(){o.fonts||o.templates||o.currentTemplate?n(z(!0)):n(z(!1)),console.log("Loadingxrw:",o)}),[o]),Object(c.useEffect)((function(){f().then((function(){return l(Object(V.a)(Object(V.a)({},o),{},{templates:!1}))})),we("popularity").then((function(e){for(var t in e=e.slice(0,100)){var c=[];c.push("https://fonts.googleapis.com/css?family="),c.push(e[t].family.replace(/ /g,"+"));var i=c.join(""),r=document.createElement("link");r.href=i,r.rel="stylesheet",document.head.appendChild(r)}n(a.setFonts(e)),l(Object(V.a)(Object(V.a)({},o),{},{fonts:!1}))})).catch((function(e){l(Object(V.a)(Object(V.a)({},o),{},{fonts:!1})),console.log(e)})).finally((function(){return l(Object(V.a)(Object(V.a)({},o),{},{fonts:!1}))}))}),[]);var j=function(){var e=Object(U.a)(P.a.mark((function e(){var t,n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={uid:u.uid,name:"New Template"+Math.floor(100*Math.random()),description:"New Template test"},e.next=3,G(t);case 3:n=e.sent,console.log(n),window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){return l(Object(V.a)(Object(V.a)({},o),{},{templates:!0})),new Promise((function(e,c){console.log("UID in templates",t.user.uid),Y(t.user.uid).then((function(t){n(a.setUserTemplates(t)),console.log("Get templates():",t),l(Object(V.a)(Object(V.a)({},o),{},{templates:!1})),e()}))}))};return Object(W.jsxs)("div",{style:{width:"100%",height:"90%",display:"flex"},children:[Object(W.jsxs)("div",{style:{width:"15%",borderRight:"2px solid #BED7E1",overflowY:"scroll",display:"flex",flexDirection:"column"},children:[Object(W.jsx)("div",{className:"button button1",onClick:j,style:{border:"2px solid #BED7E1",margin:"5px 10px"},children:"Create Template"}),Object(W.jsx)("span",{style:{marginLeft:10,fontFamily:"monospace",fontSize:18,fontWeight:"bold",color:"gray"},children:"Existing Templates:"}),t.templates.userTemplates.map((function(e,c){return Object(W.jsx)("div",{className:"button button1",style:{margin:"4px auto",marginLeft:10},onClick:function(){return function(e){n(a.setCurrentTemplate({id:null,canvas:{items:[],rev:[]}})),l(Object(V.a)(Object(V.a)({},o),{},{currentTemplate:!0}));var c=e.id,i=e.data;Te(i.canvas.items).then((function(e){var r=function(t){var n=e[t];i.canvas.items.map((function(e){return e.id===n.id?n:e}))};for(var s in e)r(s);var d=Object(V.a)(Object(V.a)({id:c},i),{},{canvas:Object(V.a)(Object(V.a)({},i.canvas),{},{items:i.canvas.items,activeItem:i.canvas.items[0]})});n(a.setCurrentTemplate(d)),console.log(t.templates),l(Object(V.a)(Object(V.a)({},o),{},{currentTemplate:!1}))}))}(e)},children:e.data.name},c)}))]}),Object(W.jsx)("div",{style:{width:"85%",display:"flex"},children:t.app.isLoading?Object(W.jsx)("div",{style:{margin:"auto",fontFamily:"monospace",fontSize:20,color:"gray"},children:"Loading..."}):Object(W.jsx)(W.Fragment,{children:t.templates.currentTemplate.id?Object(W.jsx)(Se,{}):Object(W.jsx)("div",{style:{fontFamily:"monospace",fontSize:20,color:"gray"},children:"No Template Selected"})})})]})},Ie=n(7),Ne=n(104),_e=n(105);n.n(_e).a.config();Object(Ne.a)({apiKey:"AIzaSyCp_G1gLGTutTUvds1V5jtuDugQivDygLA",authDomain:"kct-final-year.firebaseapp.com",projectId:"kct-final-year",storageBucket:"kct-final-year.appspot.com",messagingSenderId:"673266487343",appId:"1:673266487343:web:288379096bc1af713376da"});var Be="https://rajasekar-backend.herokuapp.com";var Fe=function(){var e=i.a.useContext(d).store,t=Object(c.useState)(null),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)([]),l=Object(s.a)(o,2),u=l[0],j=l[1],f=Object(c.useState)([]),b=Object(s.a)(f,2),p=b[0],m=b[1],h=Object(c.useState)(null),g=Object(s.a)(h,2),O=g[0],x=g[1],v=Object(c.useState)({}),y=Object(s.a)(v,2),C=y[0],E=y[1],S=Object(c.useState)(null),k=Object(s.a)(S,2),T=k[0],D=k[1],I=Object(c.useState)(null),N=Object(s.a)(I,2),_=N[0],B=N[1],F=Object(c.useState)(""),R=Object(s.a)(F,2),A=R[0],L=R[1],z=Object(c.useState)(null),H=Object(s.a)(z,2),M=H[0],P=H[1],U=Object(c.useState)(null),q=Object(s.a)(U,2),G=q[0],X=q[1],J=Object(c.useState)(null),K=Object(s.a)(J,2),Q=K[0],Z=K[1],ee=Object(c.useState)(null),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],ce=Object(c.useState)(null),ie=Object(s.a)(ce,2),re=ie[0],oe=ie[1],se=Object(c.useState)(null),le=Object(s.a)(se,2),de=le[0],ue=le[1],je={marginRight:10,fontFamily:"monospace",fontSize:16},fe=[{fieldName:"Recipient Name",onChangeFunc:function(e){B(e.target.value)},placeHolder:"Name"},{fieldName:"Email",onChangeFunc:function(e){P(e.target.value)},placeHolder:"Email ID"},{fieldName:"College",onChangeFunc:function(e){X(e.target.value)},placeHolder:"College Name"},{fieldName:"Batch",onChangeFunc:function(e){Z(e.target.value)},placeHolder:"Batch (eg:2018-2022)"},{fieldName:"Degree",onChangeFunc:function(e){ae(e.target.value)},placeHolder:"Degree Name"},{fieldName:"Department",onChangeFunc:function(e){oe(e.target.value)},placeHolder:"Department Name"},{fieldName:"Roll No",onChangeFunc:function(e){ue(e.target.value)},placeHolder:"Student ID"}];Object(c.useEffect)((function(){$(e.user.uid).then((function(e){console.log("certificates"),console.log(e.data),j(e)}))}),[]);var be=function(){x(null),E({}),D(null),B(null),P(null),L("")};return Object(W.jsxs)("div",{style:{width:"100%",height:"90%",display:"flex"},children:[Object(W.jsxs)("div",{style:{width:"20%",borderRight:"2px solid #BED7E1",overflowY:"scroll",display:"flex",flexDirection:"column"},children:[Object(W.jsx)("div",{className:"button button1",onClick:function(){Y(e.user.uid).then((function(e){m(e)})),be(),r(null)},style:{border:"2px solid #BED7E1",margin:"5px 10px"},children:"Create certificate from template"}),Object(W.jsx)("span",{style:{marginLeft:10,fontFamily:"monospace",fontSize:18,fontWeight:"bold",color:"gray"},children:"Issued Certificates:"}),u.map((function(e){return Object(W.jsx)("div",{className:"button button1",style:{width:200,margin:"4px auto",marginLeft:10},onClick:function(){!function(e){var t=Object(w.c)(Object(w.b)(),"/certificates/".concat(e.data.name));Object(w.a)(t).then((function(t){r({cert:e,url:t})})),m([]),be()}(e)},children:e.data.receiverName},e.id)}))]}),Object(W.jsx)("div",{style:{width:"80%",display:"flex",overflowY:"scroll",fontSize:14},children:Object(W.jsxs)("div",{style:{margin:30},children:[a&&Object(W.jsxs)("div",{style:{margin:"auto",fontFamily:"monospace"},children:[Object(W.jsx)("img",{height:.7*window.innerHeight,src:a.url,alt:"certificate"}),Object(W.jsx)("div",{style:{textDecoration:"underline",color:"blue",cursor:"pointer",marginBottom:5},onClick:function(){navigator.clipboard.writeText("".concat("https://rajasekar-backend.herokuapp.com","/view_certificate/").concat(a.cert.data.name)),alert("Copied link to clipboard")},children:"".concat("https://rajasekar-backend.herokuapp.com","/view_certificate/").concat(a.cert.data.name)}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Hedera FilleId: ",a.cert.data.hederaFileId]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Name:",a.cert.data.receiverName]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Email:",a.cert.data.receiverEmail]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["College:",a.cert.data.college]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Batch:",a.cert.data.batch]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Degree:",a.cert.data.degree]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Department:",a.cert.data.department]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Roll No:",a.cert.data.rollNo]})]}),Object(W.jsxs)("div",{children:[p.length>0&&Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)("span",{style:{fontFamily:"monospace",fontSize:28,fontWeight:"bold"},children:"Templates:"}),p.map((function(e){return Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"row",height:70},children:[Object(W.jsx)("div",{style:{fontSize:20,fontFamily:"monospace",color:"gray",margin:"auto 10px"},children:e.data.name}),Object(W.jsx)("div",{className:"button button1",style:{margin:"auto 10px",border:"1px solid #BED7E1"},onClick:function(){L(e.data.name),D(e.id),function(e){var t="".concat(Be,"/template/fields/").concat(e);console.log(t),ye.a.get(t).then((function(e){x(e.data)}))}(e.id),m([])},children:"Create certificate"})]},e.id)}))]}),O&&Object(W.jsxs)("div",{children:[Object(W.jsx)("span",{style:{fontFamily:"monospace",fontSize:28,fontWeight:"bold"},children:A}),Object(W.jsxs)("form",{style:{display:"flex",flexDirection:"column",marginTop:15},children:[fe.map((function(e){return Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginBottom:10},children:[Object(W.jsx)("label",{style:je,children:e.fieldName}),Object(W.jsx)("input",{type:"text",placeholder:e.placeHolder,onChange:function(t){return e.onChangeFunc(t)}})]})})),O.map((function(e){return Object(W.jsxs)("div",{style:{marginBottom:10},children:[Object(W.jsx)("label",{style:{marginRight:10,fontFamily:"monospace",fontSize:16},children:e}),Object(W.jsx)("input",{type:"text",placeholder:e,onChange:function(t){E(Object(V.a)(Object(V.a)({},C),{},Object(Ie.a)({},e,t.target.value)))}})]},e)})),Object(W.jsx)("div",{className:"button button1",style:{border:"2px solid #BED7E1",width:200,marginLeft:"auto"},onClick:function(t){return function(t){t.preventDefault(),console.log(T);var n={uid:e.user.uid,templateId:T,receiverName:_,receiverEmail:M,fields:C,isShareable:!0,college:G,batch:Q,degree:ne,department:re,rollNo:de},a="".concat(Be,"/certificate/one");console.log(a),ye.a.post(a,n).then((function(e){console.log(e)})).catch((function(e){console.log("Error:",e)}))}(t)},children:"Create certificate"})]})]})]})]})})]})},Re=n(55),Ae=n(25);var Le=function(){var e=Object(Ae.f)().id,t=i.a.useContext(d).store,n=Object(c.useState)([]),a=Object(s.a)(n,2),r=a[0],o=a[1],l=Object(c.useState)(null),u=Object(s.a)(l,2),j=u[0],f=u[1],b=Object(c.useState)(null),p=Object(s.a)(b,2),m=p[0],h=p[1];Object(c.useEffect)((function(){console.log(e),$(t.user.uid).then((function(e){o(e)})).then((function(t){g(e)}))}),[]),Object(c.useEffect)((function(){h(r.find((function(t){return t.data.name==e}))),console.log(r)}),[r]);var g=function(){var e=Object(U.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(q.g)(),n=Object(w.c)(Object(w.b)(),"/certificates/".concat(t)),Object(w.a)(n).then((function(e){f({cert:t,url:e})})),r.length>0&&h(r.find((function(e){return e.data.name==t})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(W.jsx)("div",{style:{margin:30,width:"100%",height:"80%",display:"flex"},children:j&&m&&(m.data.isShareable?Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",margin:"auto",fontFamily:"monospace",fontSize:16},children:[Object(W.jsx)("img",{height:.7*window.innerHeight,src:j.url,alt:"certificate",style:{margin:"auto"}}),Object(W.jsxs)("div",{style:{margin:"5px auto"},children:[Object(W.jsx)("span",{style:{fontWeight:"bold"},children:"Hedera File ID:"}),m.data.hederaFileId]}),Object(W.jsxs)("div",{style:{margin:"5px auto"},children:[Object(W.jsx)("span",{style:{fontWeight:"bold"},children:"Recepient Name:"}),m.data.receiverName]}),Object(W.jsxs)("div",{style:{margin:"5px auto"},children:[Object(W.jsx)("span",{style:{fontWeight:"bold"},children:"Recepient Email:"}),m.data.receiverEmail]}),Object(W.jsxs)("div",{style:{margin:"5px auto"},children:[Object(W.jsx)("span",{style:{fontWeight:"bold"},children:"College:"}),m.data.college]}),Object(W.jsxs)("div",{style:{margin:"5px auto"},children:[Object(W.jsx)("span",{style:{fontWeight:"bold"},children:"Batch:"}),m.data.batch]}),Object(W.jsxs)("div",{style:{margin:"5px auto"},children:[Object(W.jsx)("span",{style:{fontWeight:"bold"},children:"Degree:"}),m.data.degree]}),Object(W.jsxs)("div",{style:{margin:"5px auto"},children:[Object(W.jsx)("span",{style:{fontWeight:"bold"},children:"Department:"}),m.data.department]}),Object(W.jsxs)("div",{style:{margin:"5px auto"},children:[Object(W.jsx)("span",{style:{fontWeight:"bold"},children:"Roll No:"}),m.data.rollNo]})]}):Object(W.jsx)("div",{style:{fontFamily:"monospace",margin:"60px auto",fontSize:20,color:"gray"},children:"Certificate has been prevented from sharing by receiver."}))})};var ze=function(){var e=i.a.useContext(d).store,t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(null),l=Object(s.a)(o,2),u=l[0],j=l[1],f=Object(c.useState)(null),b=Object(s.a)(f,2),p=b[0],m=b[1],h=Object(c.useState)([]),g=Object(s.a)(h,2),O=(g[0],g[1],Object(c.useState)(null)),x=Object(s.a)(O,2),v=(x[0],x[1],Object(c.useState)({})),y=Object(s.a)(v,2),C=(y[0],y[1],Object(c.useState)(null)),E=Object(s.a)(C,2),S=(E[0],E[1],Object(c.useState)(null)),k=Object(s.a)(S,2),T=k[0],D=k[1],I=Object(c.useState)(""),N=Object(s.a)(I,2),_=(N[0],N[1],Object(c.useState)(null)),B=Object(s.a)(_,2),F=B[0],R=B[1],A={marginRight:10,fontFamily:"monospace",fontSize:16};Object(c.useEffect)((function(){ee(e.user.email).then((function(e){r(e)}))}),[]);var L=function(){var e=Object(U.a)(P.a.mark((function e(t){var n;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(w.c)(Object(w.b)(),"/certificates/".concat(t.data.name)),Object(w.a)(n).then((function(e){j({cert:t,url:e})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(W.jsxs)("div",{style:{width:"100%",height:"90%",display:"flex"},children:[Object(W.jsxs)("div",{style:{width:"20%",borderRight:"2px solid #BED7E1",overflowY:"scroll",display:"flex",flexDirection:"column"},children:[Object(W.jsx)("span",{style:{marginLeft:10,fontFamily:"monospace",fontSize:18,fontWeight:"bold",color:"gray"},children:"Issued Certificates:"}),a.map((function(e){return Object(W.jsx)("div",{className:"button button1",style:{width:200,margin:"4px auto",marginLeft:10},onClick:function(){m(null),R(null),D(null),L(e)},children:e.data.receiverName},e.id)}))]}),Object(W.jsx)("div",{style:{width:"80%",display:"flex",overFlowY:"scroll"},children:Object(W.jsx)("div",{style:{margin:"10px 30px",display:"flex",width:"100%",height:"100%",flexDirection:"column"},children:u&&(p?Object(W.jsx)("div",{style:{margin:"30px auto"},children:Object(W.jsxs)("form",{style:{display:"flex",flexDirection:"column",marginTop:15},children:[Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginBottom:10},children:[Object(W.jsx)("label",{style:A,children:"Name"}),Object(W.jsx)("input",{type:"text",placeholder:"Name",defaultValue:T,onChange:function(e){D(e.target.value)}})]}),Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginBottom:10},children:[Object(W.jsx)("label",{style:A,children:"Email"}),Object(W.jsx)("input",{type:"text",placeholder:"Email",defaultValue:F,onChange:function(e){R(e.target.value)}})]}),Object(W.jsx)("div",{className:"button button1",style:{border:"2px solid #BED7E1",width:100,marginLeft:"auto"},onClick:function(e){ne(u.cert.id,u.cert.data.uid,{name:T,email:F})},children:"Request"})]})}):Object(W.jsxs)(W.Fragment,{children:[Object(W.jsxs)("div",{style:{marginLeft:"auto",marginTop:20,display:"flex",justifyContent:"space-between",width:"100%"},children:[Object(W.jsx)("div",{style:{fontFamily:"monospace",textDecoration:"underline",color:"blue",cursor:"pointer",margin:"auto 0"},onClick:function(){navigator.clipboard.writeText("".concat("https://rajasekar-backend.herokuapp.com","/view_certificate/").concat(u.cert.data.name)),alert("Copied link to clipboard")},children:"".concat("https://rajasekar-backend.herokuapp.com","/view_certificate/").concat(u.cert.data.name)}),Object(W.jsxs)("div",{children:[Object(W.jsx)("div",{className:"button button1",style:{margin:"auto 5px",border:"1px solid #BED7E1"},onClick:Object(U.a)(P.a.mark((function e(){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te(u.cert.id,!u.cert.data.isShareable);case 2:window.location.reload();case 3:case"end":return e.stop()}}),e)}))),children:u.cert.data.isShareable?"Stop sharing":"Resume Sharing"}),Object(W.jsx)("div",{className:"button button1",style:{margin:"auto 5px",border:"1px solid #BED7E1"},onClick:function(){R(u.cert.data.receiverEmail),D(u.cert.data.receiverName),m(!0)},children:"Request Changes"})]})]}),Object(W.jsx)("div",{style:{margin:"20px auto"},children:Object(W.jsx)("img",{height:.7*window.innerHeight,src:u.url,alt:"certificate"})}),Object(W.jsxs)("div",{style:{fontFamily:"monospace",fontSize:14,margin:"auto"},children:[Object(W.jsxs)("div",{style:{marginBottom:5},children:["Hedera FilleId: ",u.cert.data.hederaFileId]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Name:",u.cert.data.receiverName]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Email:",u.cert.data.receiverEmail]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["College:",u.cert.data.college]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Batch:",u.cert.data.batch]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Degree:",u.cert.data.degree]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Department:",u.cert.data.department]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Roll No:",u.cert.data.rollNo]})]})]}))})})]})};var We=function(){var e=i.a.useContext(d).store,t=Object(c.useState)([]),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(c.useState)(null),l=Object(s.a)(o,2),u=l[0],j=l[1],f=Object(c.useState)(null),b=Object(s.a)(f,2),p=b[0],m=b[1];Object(c.useEffect)((function(){ae(e.user.id).then((function(e){r(e)}))}),[]);var h=function(){var e=Object(U.a)(P.a.mark((function e(t){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ce(t.data.certificate_id).then((function(e){m(e.find((function(e){return e.id===t.data.certificate_id}))),j(t)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(W.jsxs)("div",{style:{width:"100%",height:"90%",display:"flex"},children:[Object(W.jsxs)("div",{style:{width:"20%",borderRight:"2px solid #BED7E1",overflowY:"scroll",display:"flex",flexDirection:"column"},children:[Object(W.jsx)("span",{style:{marginLeft:10,fontFamily:"monospace",fontSize:18,fontWeight:"bold",color:"gray"},children:"Changes Requested:"}),a.length>0&&a.map((function(e){return Object(W.jsx)("div",{className:"button button1",style:{width:200,margin:"4px auto",marginLeft:10},onClick:function(){h(e)},children:e.data.certificate_id},e.id)}))]}),Object(W.jsx)("div",{style:{width:"80%",display:"flex"},children:Object(W.jsx)("div",{style:{margin:"10px 30px",display:"flex",width:"100%",height:"100%",flexDirection:"column"},children:u&&Object(W.jsxs)("div",{style:{fontFamily:"monospace",fontSize:14,margin:"20px auto"},children:[Object(W.jsxs)("div",{style:{marginBottom:20},children:[Object(W.jsx)("span",{style:{fontWeight:"bold",fontSize:20},children:"New Data"}),Object(W.jsxs)("div",{style:{marginTop:10,marginBottom:5},children:["New Name: ",u.data.new_name]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["New Email: ",u.data.new_email]})]}),p&&Object(W.jsxs)("div",{children:[Object(W.jsx)("span",{style:{fontWeight:"bold",fontSize:20},children:"Existing Data"}),Object(W.jsxs)("div",{style:{marginTop:10,marginBottom:5,fontWeight:"bold"},children:["Name:",p.data.receiverName]}),Object(W.jsxs)("div",{style:{marginBottom:5,fontWeight:"bold"},children:["Email:",p.data.receiverEmail]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Hedera FilleId: ",p.data.hederaFileId]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["College:",p.data.college]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Batch:",p.data.batch]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Degree:",p.data.degree]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Department:",p.data.department]}),Object(W.jsxs)("div",{style:{marginBottom:5},children:["Roll No:",p.data.rollNo]})]}),Object(W.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",margintTop:30},children:[Object(W.jsx)("div",{className:"button button1",style:{margin:"auto 5px",border:"1px solid #BED7E1"},onClick:function(){ie(p.id,u.id,!1)},children:"Reject"}),Object(W.jsx)("div",{className:"button button1",style:{margin:"auto 5px",border:"1px solid #BED7E1"},onClick:function(){ie(p.id,u.id,!0,{newName:u.data.new_name,newEmail:u.data.new_email})},children:"Approve"})]})]})})})]})};var He,Me=function(){var e=Object(c.useContext)(d),t=e.store,n=e.dispatch,a=Object(l.b)(),i=Object(c.useState)(t.user||null),r=Object(s.a)(i,2),o=r[0],u=r[1],j=Object(c.useState)(""),f=Object(s.a)(j,2),b=f[0],p=f[1],m={margin:"auto 15px",color:"gray",cursor:"pointer",fontFamily:"monospace",fontSize:18,fontWeight:"bold"};return Object(c.useEffect)((function(){n(z(!0))}),[]),Object(c.useEffect)((function(){p(window.location.pathname.slice(0,17))}),[window.location.pathname]),Object(c.useEffect)((function(){Object(l.c)(a,(function(e){e?u(e):console.log("No user")}))})),Object(c.useEffect)((function(){n(L(o)),console.log("UserId from App.js",o.uid)}),[o]),Object(W.jsxs)("div",{style:{width:"100vw",height:"100vh"},children:[Object(W.jsx)("div",{style:{width:"100%",height:"70px",display:"flex",backgroundColor:"#BED7E1"},children:Object(W.jsx)("div",{style:{margin:"auto auto auto 10px",color:"white",fontFamily:"monospace",fontSize:30,cursor:"pointer",padding:"15px 0"},onClick:function(){window.location="/signin"},children:"Certify"})}),Object(W.jsx)(Re.a,{children:Object(W.jsx)(Ae.c,{children:Object(W.jsxs)(W.Fragment,{children:[function(){if("/view_certificate"!==b)return"/recipient_portal"===b?Object(W.jsxs)("div",{style:{width:"100%",height:"50px",backgroundColor:"#dfedf2",boxShadow:"10px 1px 3px rgba(50, 50, 50, 0.25)",display:"flex",flexDirection:"row"},children:[Object(W.jsx)("div",{style:m,onClick:function(){window.location.replace("/signin")},children:"SignIn"}),Object(W.jsx)("div",{style:m,onClick:function(){window.location.replace("/recipient_portal/my_certificates")},children:"My Certificates"})]}):Object(W.jsxs)("div",{style:{width:"100%",height:"50px",backgroundColor:"#dfedf2",boxShadow:"10px 1px 3px rgba(50, 50, 50, 0.25)",display:"flex",flexDirection:"row"},children:[Object(W.jsx)("div",{style:m,onClick:function(){window.location.replace("/signin")},children:"SignIn"}),Object(W.jsx)("div",{style:m,onClick:function(){window.location.replace("/certificates")},children:"Certificates"}),Object(W.jsx)("div",{style:m,onClick:function(){window.location.replace("/templates")},children:"Templates"}),Object(W.jsx)("div",{style:m,onClick:function(){window.location.replace("/view_requested_changes")},children:"Change Requests"})]})}(),t.user.uid?Object(W.jsxs)(W.Fragment,{children:[Object(W.jsx)(Ae.a,{path:"/signin",exact:!0,children:Object(W.jsx)(H,{})}),Object(W.jsx)(Ae.a,{path:"/templates",exact:!0,children:Object(W.jsx)(De,{})}),Object(W.jsx)(Ae.a,{path:"/certificates",exact:!0,children:Object(W.jsx)(Fe,{})}),Object(W.jsx)(Ae.a,{path:"/view_requested_changes",exact:!0,children:Object(W.jsx)(We,{})}),Object(W.jsx)(Ae.a,{path:"/view_certificate/:id",exact:!0,children:Object(W.jsx)(Le,{})}),Object(W.jsx)(Ae.a,{path:"/recipient_portal/my_certificates",exact:!0,children:Object(W.jsx)(ze,{})})]}):Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(H,{})})]})})})]})},Pe=(He={app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING_STATE":return Object(V.a)(Object(V.a)({},e),{},{isLoading:t.payload});default:return e}},templates:function(e,t){switch(t.type){case O:return Object(V.a)(Object(V.a)({},e),{},{currentTemplate:t.payload});case x:return Object(V.a)(Object(V.a)({},e),{},{userTemplates:t.payload});case b:return Object(V.a)(Object(V.a)({},e),{},{currentTemplate:Object(V.a)(Object(V.a)({},e.currentTemplate),{},{canvas:Object(V.a)(Object(V.a)({},e.currentTemplate.canvas),{},{items:[].concat(Object(re.a)(e.currentTemplate.canvas.items),[t.payload]),activeItem:t.payload})})});case p:return Object(V.a)(Object(V.a)({},e),{},{currentTemplate:Object(V.a)(Object(V.a)({},e.currentTemplate),{},{canvas:Object(V.a)(Object(V.a)({},e.currentTemplate.canvas),{},{items:t.payload})})});case m:return Object(V.a)(Object(V.a)({},e),{},{currentTemplate:Object(V.a)(Object(V.a)({},e.currentTemplate),{},{canvas:Object(V.a)(Object(V.a)({},e.currentTemplate.canvas),{},{activeItem:t.payload})})});case h:return Object(V.a)(Object(V.a)({},e),{},{currentTemplate:Object(V.a)(Object(V.a)({},e.currentTemplate),{},{canvas:Object(V.a)(Object(V.a)({},e.currentTemplate.canvas),{},{stageRef:t.payload})})});case g:return Object(V.a)(Object(V.a)({},e),{},{currentTemplate:Object(V.a)(Object(V.a)({},e.currentTemplate),{},{canvas:Object(V.a)(Object(V.a)({},e.currentTemplate.canvas),t.payload)})});case v:return Object(V.a)(Object(V.a)({},e),{},{fonts:t.payload});case y:return Object(V.a)(Object(V.a)({},e),{},{fonts:[].concat(Object(re.a)(e.fonts),[t.payload])});default:return e}},user:function(e,t){switch(t.type){case R:return Object(V.a)(Object(V.a)({},e),{},{isSignedIn:!0},t.payload);case A:return Object(V.a)(Object(V.a)({},e),{},{isSignedIn:!1,user:null});default:return e}}},function(e,t){return Object.keys(He).reduce((function(e,n){return Object(V.a)(Object(V.a)({},e),{},Object(Ie.a)({},n,He[n](e[n],t)))}),e)}),Ue=u();j().storageRef="default_template_images/image.jpg";var Ve={app:{isLoading:!1},user:{isSignedIn:!1,name:null,email:null,photo:null,uid:null,isVerified:null},templates:{userTemplates:[],currentTemplate:{id:null,canvas:{isBaseImageLoaded:!1,otherImagesLoaded:!1,ratio:"default",imageRef:{baseImage:null,otherImages:[]},stageRef:null,items:[{id:"baseImage",type:"base-image",name:"Base template image",src:"default"},Ue],activeItem:Ue}},fonts:[]}},qe=function(){var e=Object(c.useReducer)(Pe,Ve),t=Object(s.a)(e,2);return{store:t[0],dispatch:t[1]}},Ge=function(e){var t=e.children,n=qe();return Object(W.jsx)(d.Provider,{value:Object(V.a)({},n),children:t})},Ye=function(){return Object(W.jsx)(Ge,{children:Object(W.jsx)(Me,{})})};o.a.render(Object(W.jsx)(Ye,{}),document.getElementById("root"))},50:function(e,t,n){}},[[175,1,2]]]);
//# sourceMappingURL=main.38a57f49.chunk.js.map